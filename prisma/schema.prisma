datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum Event {
  all
  messageDelete
  messageBulkDelete
  messageUpdate
  channelCreate
  channelDelete
  channelUpdate
  channelPinsUpdate
  guildBanAdd
  guildBanRemove
  guildEmojiCreate
  guildEmojiRemove
  guildEmojiUpdate
  guildMemberAdd
  guildMemberRemove
  guildMemberUpdate
  roleCreate
  roleDelete
  roleUpdate
  stickerCreate
  stickerRemove
  guildUpdate
}

model LogChannel {
  id        String  @id @default(auto()) @map("_id") @db.ObjectId
  /// Guild Id
  guildId   String  @map("guild_id")
  guild     Guild   @relation(fields: [guildId], references: [guildId])
  /// Channel id to send all logs.
  channelId String
  /// The array of the events on.
  /// if it is empty, it does not send any logs.
  events    Event[] @default([])

  @@unique([guildId, channelId])
}

enum Language {
  EN
  ES
  DE
}

model Guild {
  id      String @id @default(auto()) @map("_id") @db.ObjectId
  /// The id of the server
  guildId String @unique @map("guild_id")

  /// The lang of the server
  lang Language @default(ES)

  /// The logs that are registered on the server
  logs LogChannel[]
}
